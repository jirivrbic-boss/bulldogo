<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Hlavn√≠ Str√°nky - Bulldogo.cz</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyA1FEmsY458LLKQLGcUaOVXsYr3Ii55QeQ",
            authDomain: "inzerio-inzerce.firebaseapp.com",
            projectId: "inzerio-inzerce",
            storageBucket: "inzerio-inzerce.firebasestorage.app",
            messagingSenderId: "262039290071",
            appId: "1:262039290071:web:30af0eb1c65cd75e307092",
            measurementId: "G-7VD0ZE08M3"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const analytics = getAnalytics(app);
        
        window.firebaseApp = app;
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        
        console.log('üî• Firebase inicializov√°n pro test hlavn√≠ str√°nky');
    </script>
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <!-- Logo Section -->
        <div class="sidebar-header">
            <div class="logo">
                <div class="logo-icon">B</div>
                <span class="logo-text">
                    <span class="logo-bull">ULL</span>
                    <span class="logo-dogo">DOGO</span>
                </span>
            </div>
        </div>

        <!-- Auth Buttons Section -->
        <div class="auth-section">
            <button class="btn-login" onclick="showAuthModal('login')">
                <i class="fas fa-sign-in-alt"></i>
                <span>P≈ôihl√°≈°en√≠</span>
            </button>
            <button class="btn-register" onclick="showAuthModal('register')">
                <i class="fas fa-user-plus"></i>
                <span>Registrace</span>
            </button>
            <button class="btn-profile" onclick="window.location.href='profile.html'">
                <i class="fas fa-user-circle"></i>
                <span>Profil</span>
            </button>
        </div>

        <!-- User Profile Section -->
        <div class="user-profile-section" style="display: none;">
            <div class="user-profile-card" onclick="toggleUserDropdown()">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                    <div class="user-email">lo3esports@email.cz</div>
                    <div class="user-role">Host</div>
                </div>
                <i class="fas fa-chevron-down dropdown-arrow"></i>
            </div>
            <div class="user-dropdown-menu">
                <div class="user-dropdown-header">
                    <i class="fas fa-user-circle"></i>
                    <div class="user-info-text">
                        <div class="user-display-name"></div>
                        <div class="user-email"></div>
                    </div>
                </div>
                <div class="user-dropdown-divider"></div>
                <div class="user-balance">
                    <i class="fas fa-wallet"></i>
                    <span class="balance-amount">0 Kƒç</span>
                </div>
                <div class="user-dropdown-divider"></div>
                <a href="my-ads.html" class="user-dropdown-item">
                    <i class="fas fa-list"></i>
                    M√© inzer√°ty
                </a>
                <button class="user-dropdown-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Odhl√°sit se
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div style="padding: 2rem;">
            <h1>Test Hlavn√≠ Str√°nky</h1>
            
            <div id="debug-info" style="margin: 1rem 0; padding: 1rem; background: #f8f9fa; border-radius: 5px;">
                <h3>Debug informace:</h3>
                <div id="debug-content">Naƒç√≠t√°m...</div>
            </div>
            
            <button onclick="testLogin()" style="padding: 1rem 2rem; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 1rem 0;">
                Test P≈ôihl√°≈°en√≠
            </button>
            
            <button onclick="testLogout()" style="padding: 1rem 2rem; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 1rem 0;">
                Test Odhl√°≈°en√≠
            </button>
            
            <button onclick="testUpdateUI()" style="padding: 1rem 2rem; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 1rem 0;">
                Test updateUI Funkce
            </button>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">P≈ôihl√°≈°en√≠</h2>
                <span class="close" onclick="closeAuthModal()">&times;</span>
            </div>
            <form id="authForm" class="auth-form">
                <div class="form-group">
                    <input type="email" id="email" name="email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" name="password" placeholder="Heslo" required>
                </div>
                <button type="submit" class="btn btn-primary auth-submit-btn">P≈ôihl√°sit se</button>
            </form>
            <div class="auth-switch">
                <button type="button" class="auth-switch-btn" data-type="register">Nem√°te √∫ƒçet? Zaregistrujte se</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="auth.js"></script>
    
    <script>
        function updateDebugInfo() {
            const debugContent = document.getElementById('debug-content');
            const authSection = document.querySelector('.auth-section');
            const userProfileSection = document.querySelector('.user-profile-section');
            
            debugContent.innerHTML = `
                <p><strong>Firebase Auth:</strong> ${window.firebaseAuth ? '‚úÖ Naƒçten' : '‚ùå Nenalezen'}</p>
                <p><strong>Current User:</strong> ${window.firebaseAuth?.currentUser ? `P≈ôihl√°≈°en: ${window.firebaseAuth.currentUser.email}` : 'Odhl√°≈°en'}</p>
                <p><strong>Auth Section:</strong> ${authSection ? '‚úÖ Nalezen' : '‚ùå Nenalezen'} (display: ${authSection ? authSection.style.display : 'N/A'})</p>
                <p><strong>User Profile Section:</strong> ${userProfileSection ? '‚úÖ Nalezen' : '‚ùå Nenalezen'} (display: ${userProfileSection ? userProfileSection.style.display : 'N/A'})</p>
                <p><strong>updateUI funkce:</strong> ${typeof window.updateUI}</p>
                <p><strong>Str√°nka:</strong> ${window.location.pathname}</p>
            `;
        }
        
        async function testLogin() {
            try {
                const email = 'test@gmail.com';
                const password = '123123';
                
                console.log('üß™ Test p≈ôihl√°≈°en√≠ na hlavn√≠ str√°nce:', email);
                if (typeof window.login === 'function') {
                    await window.login(email, password);
                } else {
                    alert('Login funkce nen√≠ dostupn√°!');
                }
            } catch (error) {
                console.error('Chyba p≈ôi testu p≈ôihl√°≈°en√≠:', error);
                alert('Chyba p≈ôi p≈ôihl√°≈°en√≠: ' + error.message);
            }
        }
        
        async function testLogout() {
            try {
                console.log('üß™ Test odhl√°≈°en√≠ na hlavn√≠ str√°nce');
                if (typeof window.logout === 'function') {
                    await window.logout();
                } else {
                    alert('Logout funkce nen√≠ dostupn√°!');
                }
            } catch (error) {
                console.error('Chyba p≈ôi testu odhl√°≈°en√≠:', error);
                alert('Chyba p≈ôi odhl√°≈°en√≠: ' + error.message);
            }
        }
        
        function testUpdateUI() {
            console.log('üß™ Test updateUI funkce');
            if (typeof window.updateUI === 'function') {
                const currentUser = window.firebaseAuth?.currentUser;
                console.log('üîß Vol√°m updateUI s u≈æivatelem:', currentUser ? currentUser.email : 'null');
                window.updateUI(currentUser);
            } else {
                alert('updateUI funkce nen√≠ dostupn√°!');
            }
        }
        
        // Aktualizovat debug info ka≈ædou sekundu
        setInterval(updateDebugInfo, 1000);
        
        // Inicializace
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üß™ Test hlavn√≠ str√°nky naƒçten');
            updateDebugInfo();
        });
    </script>
</body>
</html>
